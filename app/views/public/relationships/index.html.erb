<h1>フォロー一覧</h1>

<%= link_to end_user_path(@end_user.id) do %>
  <%= image_tag @end_user.get_profile_image(100, 100) %>
  <%= @end_user.name %>
<% end %>

<div class="card" style="width: 18rem;">
  <ul class="list-group list-group-flush">
    <li class="list-group-item">
      <%= link_to "フォロー中", end_user_relationships_path(@end_user.id), class: "text-dark" %>
      <%= @end_user.followings.count %>
    </li>
    <li class="list-group-item">
      <%= link_to "フォロワー", end_user_relationships_path(@end_user.id, followers_id: @end_user.id), class: "text-dark" %>
      <%= @end_user.followers.count %>
    </li>
  </ul>
</div>

<% @end_users.each do |follow| %>
  <div>
    <%= link_to end_user_path(follow.id) do %>
      <%= image_tag follow.get_profile_image(100, 100) %>
      <%= follow.name %>
    <% end %>
    <% if follow != current_end_user %>
      <% if current_end_user.following?(current_end_user, follow) %>
        <%= link_to "フォロー済", end_user_relationships_path(follow.id), method: :delete, class: "btn btn-secondary" %>
      <% else %>
        <%= link_to "フォローする", end_user_relationships_path(follow.id), method: :post, class: "btn btn-primary" %>
      <% end %>
    <% end %>
  </div>
<% end %>
